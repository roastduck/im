<html ng-app="appIndex">
    <head>
        <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="index.css" />
		<script>
            window.$ = window.jQuery = require('./node_modules/jquery/dist/jquery.min.js');
            require('./node_modules/bootstrap/dist/js/bootstrap.min.js');
            require('./node_modules/angular/angular.min.js');
            require('./index.js');
        </script>
    </head>
    <body ng-controller="IndexController">
        <div id='toast' style='display:none'></div>

        <div class='container-fluid' ng-if='loggedIn'>
            <div class='row' style='height:100%'>
                <div class='col-xs-4' style='background-color:#B2FFFF;height:100%'>
                    <div class='container-fluid'>
                        <div class='row'>
                            <div class='col-xs-12'>
                                <form style='margin:10px -20px 10px -20px'>
                                    <div class="input-group">
                                        <input type='text' class='form-control' placeholder="Add contact"
                                               ng-model='contactForm.input'
                                        />
                                        <div class="input-group-btn">
                                            <!-- Unfortunately, we can only have buttons at one side -->
                                            <button class="btn btn-default" ng-click='addContact()'
                                                    style='padding-left:10px;padding-right:10px'
                                            >
                                                &#8203; <!-- Needed for known Bootstrap bug, same below -->
                                                <span class="glyphicon glyphicon-plus"></span>
                                                &#8203;
                                            </button>
                                            <button class="btn btn-default" ng-click='logout()'
                                                    style='padding-left:10px;padding-right:10px'
                                            >
                                                &#8203;
                                                <span class="glyphicon glyphicon-log-out"></span>
                                                &#8203;
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class='row'>
                            <div class='col-xs-12'>
                                <ul class='nav nav-pills nav-stacked' style='margin-left:-30px;margin-right:-30px'
                                    ng-repeat='name in contact'
                                >
                                    <li ng-class='{active:contactForm.active==name}'>
                                        <a href="#" ng-click='contactForm.active=name'>
                                            <big><strong style='color:black'>{{name}}</strong></big>
                                            <button type="button" class="close pull-right" ng-click='delContact(name)'>
                                                &times;
                                            </button>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='col-xs-8' style='background-color:#8EE8D6;height:100%'>
                    <div class='container-fluid' ng-if='contactForm.active' style='height:100%'>
                        <div class='row' style='height:78%'>
                            <div class='col-xs-12' style='overflow:scoll' ng-if='log[contactForm.active]'>
                                <div style='margin-left:-10px;margin-right:-10px'
                                     ng-repeat='l in log[contactForm.active]'
                                >
                                    <blockquote ng-class='{"blockquote-reverse":l.to==contactForm.active}'
                                                style='border-color:4D94FF'
                                    >
                                        <p>
                                            <strong>
                                                <small>{{getTime(l.timestamp)}}</small>
                                            </strong>
                                        </p>
                                        <p>
                                            {{l.body}}
                                        </p>
                                    </blockquote>
                                </div>
                            </div>
                        </div>
                        <div class='row' style='height:22%'>
                            <div class='col-xs-12' style='height:100%'>
                                <div class='clearfix'
                                     style='height:100%;background-color:white;margin-left:-30px;margin-right:-30px'
                                >
                                    <form>
                                        <textarea id='chat-in' class='col-xs-12 form-control' rows='3'
                                                  ng-model='chatForm.input'
                                        ></textarea>
                                        <span style='background-color:white;width:100%'>
                                            <button class='btn btn-default pull-right' style='margin:3px'
                                                    ng-click='send()'
                                            >
                                                Submit
                                            </button>
                                        </span>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class='vertical-center' ng-if='!loggedIn' style='background-color:#8EE8D6'>
			<div class='container'>
				<div class='row'>
					<div class='col-xs-3'></div>
                    <div class='col-xs-6'>
                        <div class='panel panel-info'>
                            <div class='panel-heading'>
                                <h3>Log in / Register</h3>
                            </div>
                            <form class='panel-body'>
                                <div class="form-group">
                                    <label for="ip-in">Server IP</label>
                                    <input type="text" class="form-control" id="ip-in"
                                           placeholder="example.com" ng-model='loginForm.ip'
                                    />
                                </div>
                                <div class="form-group">
                                    <label for="name-in">Name</label>
                                    <input type="text" class="form-control" id="name-in"
                                           placeholder="Mr. Example" ng-model='loginForm.name'
                                    />
                                </div>
                                <div class="form-group">
                                    <label for="pwd-in">Password</label>
                                    <input type="password" class="form-control" id="pwd-in"
                                           ng-model='loginForm.password'
                                    />
                                </div>
                                <button class="btn btn-danger form-control" ng-click='login()'>
                                    Log in
                                </button>

                                <hr />

                                <div class="form-group">
                                    <label for="rpt-pwd-in">Confirm password</label>
                                    <input type="password" class="form-control" id="rpt-pwd-in"
                                           ng-model='loginForm.repeatPwd'
                                    />
                                </div>
                                <button class="btn btn-danger form-control" ng-click='register()'>
                                    Register
                                </button>
                            </form>
                        </div>
					</div>
					<div class='col-xs-3'></div>
				</div>
            </div>
        </div>
    </body>
</html>

